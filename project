{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Collecting package metadata (current_repodata.json): done\n",
      "Solving environment: done\n",
      "\n",
      "\n",
      "==> WARNING: A newer version of conda exists. <==\n",
      "  current version: 4.8.2\n",
      "  latest version: 4.8.4\n",
      "\n",
      "Please update conda by running\n",
      "\n",
      "    $ conda update -n base conda\n",
      "\n",
      "\n",
      "\n",
      "# All requested packages already installed.\n",
      "\n",
      "Collecting package metadata (current_repodata.json): done\n",
      "Solving environment: done\n",
      "\n",
      "\n",
      "==> WARNING: A newer version of conda exists. <==\n",
      "  current version: 4.8.2\n",
      "  latest version: 4.8.4\n",
      "\n",
      "Please update conda by running\n",
      "\n",
      "    $ conda update -n base conda\n",
      "\n",
      "\n",
      "\n",
      "# All requested packages already installed.\n",
      "\n",
      "Libraries imported.\n"
     ]
    }
   ],
   "source": [
    "import numpy as np # library to handle data in a vectorized manner\n",
    "\n",
    "import pandas as pd # library for data analsysis\n",
    "pd.set_option('display.max_columns', None)\n",
    "pd.set_option('display.max_rows', None)\n",
    "\n",
    "import json # library to handle JSON files\n",
    "\n",
    "!conda install -c conda-forge geopy --yes \n",
    "from geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n",
    "\n",
    "import requests # library to handle requests\n",
    "from pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe\n",
    "\n",
    "# Matplotlib and associated plotting modules\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors\n",
    "\n",
    "# import k-means from clustering stage\n",
    "from sklearn.cluster import KMeans\n",
    "\n",
    "!conda install -c conda-forge folium=0.5.0 --yes \n",
    "\n",
    "print('OK Libraries imported.')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of Rio de Janeiro is -22.9110137, -43.2093727.\n"
     ]
    }
   ],
   "source": [
    "# Get longitude and latitude for Toronto\n",
    "address = 'Rio de Janeiro, Rio de Janeiro'\n",
    "\n",
    "geolocator = Nominatim(user_agent=\"rio_explorer\")\n",
    "location = geolocator.geocode(address)\n",
    "latitude = location.latitude\n",
    "longitude = location.longitude\n",
    "print('The geograpical coordinate of Rio de Janeiro is {}, {}.'.format(latitude, longitude))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK\n",
      "CLIENT_SECRET:HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV\n"
     ]
    }
   ],
   "source": [
    "# Set up Foursquare\n",
    "CLIENT_ID = 'XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK' # your Foursquare ID\n",
    "CLIENT_SECRET = 'HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV' # your Foursquare Secret\n",
    "VERSION = '20180605' # Foursquare API version\n",
    "LIMIT = 100\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Restaurant .... OK!\n"
     ]
    }
   ],
   "source": [
    "search_query = 'Restaurant'\n",
    "radius = 50000\n",
    "print(search_query + ' .... OK!')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK\n",
      "CLIENT_SECRET:HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV\n"
     ]
    }
   ],
   "source": [
    "# Set up Foursquare\n",
    "CLIENT_ID = 'XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK' # your Foursquare ID\n",
    "CLIENT_SECRET = 'HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV' # your Foursquare Secret\n",
    "VERSION = '20180605' # Foursquare API version\n",
    "LIMIT = 100\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/search?client_id=XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK&client_secret=HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV&ll=-22.9110137,-43.2093727&v=20180605&query=Restaurant&radius=50000&limit=100'"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "url = 'https://api.foursquare.com/v2/venues/search?client_id={}&client_secret={}&ll={},{}&v={}&query={}&radius={}&limit={}'.format(CLIENT_ID, CLIENT_SECRET, latitude, longitude, VERSION, search_query, radius, LIMIT)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/search?client_id=XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK&client_secret=HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV&ll=-22.9110137,-43.2093727&v=20180605&query=Restaurant&radius=50000&limit=100'"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'https://api.foursquare.com/v2/venues/search?client_id=XBVDVFI3BB3LBMSPWBVCYUDG0AGUZRQP1MFUXOS0SKACIAGK&client_secret=HD34GAYDCO0GOUM1Z3NFCY4JH4FO0V5F4FMOLO4CEDSZO5AV&ll=-22.9110137,-43.2093727&v=20180605&query=Restaurant&radius=50000&limit=100'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "results = requests.get(url).json()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>categories</th>\n",
       "      <th>hasPerk</th>\n",
       "      <th>id</th>\n",
       "      <th>location.address</th>\n",
       "      <th>location.cc</th>\n",
       "      <th>location.city</th>\n",
       "      <th>location.country</th>\n",
       "      <th>location.crossStreet</th>\n",
       "      <th>location.distance</th>\n",
       "      <th>location.formattedAddress</th>\n",
       "      <th>location.labeledLatLngs</th>\n",
       "      <th>location.lat</th>\n",
       "      <th>location.lng</th>\n",
       "      <th>location.postalCode</th>\n",
       "      <th>location.state</th>\n",
       "      <th>name</th>\n",
       "      <th>referralId</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>[{'id': '52e81612bcbc57f1066b79f1', 'name': 'B...</td>\n",
       "      <td>False</td>\n",
       "      <td>56e04e1d38fa3ae11155b863</td>\n",
       "      <td>Rua Riachuelo, 242</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2146</td>\n",
       "      <td>[Rua Riachuelo, 242, Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.914733, 'lng'...</td>\n",
       "      <td>-22.914733</td>\n",
       "      <td>-43.188829</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>Ri치 Restaurant</td>\n",
       "      <td>v-1598051845</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>[{'id': '4bf58dd8d48988d16b941735', 'name': 'B...</td>\n",
       "      <td>False</td>\n",
       "      <td>4ece6782cc219860f521dd5d</td>\n",
       "      <td>NaN</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1828</td>\n",
       "      <td>[Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.9097338088607...</td>\n",
       "      <td>-22.909734</td>\n",
       "      <td>-43.191598</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>Restaurante Pitada</td>\n",
       "      <td>v-1598051845</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>[{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...</td>\n",
       "      <td>False</td>\n",
       "      <td>50e0b634e4b0f94bd8a38f47</td>\n",
       "      <td>Navio Soberano</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2849</td>\n",
       "      <td>[Navio Soberano, Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.8928508209919...</td>\n",
       "      <td>-22.892851</td>\n",
       "      <td>-43.189795</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>Restaurant El Duero</td>\n",
       "      <td>v-1598051845</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>[{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...</td>\n",
       "      <td>False</td>\n",
       "      <td>4e0209e4b0fbdf39a4592821</td>\n",
       "      <td>Silva paulet esquina com costa barros</td>\n",
       "      <td>BR</td>\n",
       "      <td>Fortaleza</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>Aldeota</td>\n",
       "      <td>431</td>\n",
       "      <td>[Silva paulet esquina com costa barros (Aldeot...</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.9148909, 'lng...</td>\n",
       "      <td>-22.914891</td>\n",
       "      <td>-43.209306</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Ce</td>\n",
       "      <td>Restaurante Braga</td>\n",
       "      <td>v-1598051845</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>[{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...</td>\n",
       "      <td>False</td>\n",
       "      <td>5a96d21ba9fe124ff5a2f604</td>\n",
       "      <td>NaN</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>577</td>\n",
       "      <td>[Rio de Janeiro, RJ, 20270-150, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.911201, 'lng'...</td>\n",
       "      <td>-22.911201</td>\n",
       "      <td>-43.215000</td>\n",
       "      <td>20270-150</td>\n",
       "      <td>RJ</td>\n",
       "      <td>Restaurante Elo Perdido</td>\n",
       "      <td>v-1598051845</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                          categories  hasPerk  \\\n",
       "0  [{'id': '52e81612bcbc57f1066b79f1', 'name': 'B...    False   \n",
       "1  [{'id': '4bf58dd8d48988d16b941735', 'name': 'B...    False   \n",
       "2  [{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...    False   \n",
       "3  [{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...    False   \n",
       "4  [{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...    False   \n",
       "\n",
       "                         id                       location.address  \\\n",
       "0  56e04e1d38fa3ae11155b863                     Rua Riachuelo, 242   \n",
       "1  4ece6782cc219860f521dd5d                                    NaN   \n",
       "2  50e0b634e4b0f94bd8a38f47                         Navio Soberano   \n",
       "3  4e0209e4b0fbdf39a4592821  Silva paulet esquina com costa barros   \n",
       "4  5a96d21ba9fe124ff5a2f604                                    NaN   \n",
       "\n",
       "  location.cc   location.city location.country location.crossStreet  \\\n",
       "0          BR  Rio de Janeiro           Brasil                  NaN   \n",
       "1          BR  Rio de Janeiro           Brasil                  NaN   \n",
       "2          BR  Rio de Janeiro           Brasil                  NaN   \n",
       "3          BR       Fortaleza           Brasil              Aldeota   \n",
       "4          BR  Rio de Janeiro           Brasil                  NaN   \n",
       "\n",
       "   location.distance                          location.formattedAddress  \\\n",
       "0               2146   [Rua Riachuelo, 242, Rio de Janeiro, RJ, Brasil]   \n",
       "1               1828                       [Rio de Janeiro, RJ, Brasil]   \n",
       "2               2849       [Navio Soberano, Rio de Janeiro, RJ, Brasil]   \n",
       "3                431  [Silva paulet esquina com costa barros (Aldeot...   \n",
       "4                577            [Rio de Janeiro, RJ, 20270-150, Brasil]   \n",
       "\n",
       "                             location.labeledLatLngs  location.lat  \\\n",
       "0  [{'label': 'display', 'lat': -22.914733, 'lng'...    -22.914733   \n",
       "1  [{'label': 'display', 'lat': -22.9097338088607...    -22.909734   \n",
       "2  [{'label': 'display', 'lat': -22.8928508209919...    -22.892851   \n",
       "3  [{'label': 'display', 'lat': -22.9148909, 'lng...    -22.914891   \n",
       "4  [{'label': 'display', 'lat': -22.911201, 'lng'...    -22.911201   \n",
       "\n",
       "   location.lng location.postalCode location.state                     name  \\\n",
       "0    -43.188829                 NaN             RJ           Ri치 Restaurant   \n",
       "1    -43.191598                 NaN             RJ       Restaurante Pitada   \n",
       "2    -43.189795                 NaN             RJ      Restaurant El Duero   \n",
       "3    -43.209306                 NaN             Ce        Restaurante Braga   \n",
       "4    -43.215000           20270-150             RJ  Restaurante Elo Perdido   \n",
       "\n",
       "     referralId  \n",
       "0  v-1598051845  \n",
       "1  v-1598051845  \n",
       "2  v-1598051845  \n",
       "3  v-1598051845  \n",
       "4  v-1598051845  "
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# assign relevant part of JSON to venues\n",
    "venues = results['response']['venues']\n",
    "\n",
    "# tranform venues into a dataframe\n",
    "dataframe = json_normalize(venues)\n",
    "dataframe.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>cc</th>\n",
       "      <th>city</th>\n",
       "      <th>country</th>\n",
       "      <th>crossStreet</th>\n",
       "      <th>distance</th>\n",
       "      <th>formattedAddress</th>\n",
       "      <th>labeledLatLngs</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "      <th>id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Ri치 Restaurant</td>\n",
       "      <td>Bistro</td>\n",
       "      <td>Rua Riachuelo, 242</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2146</td>\n",
       "      <td>[Rua Riachuelo, 242, Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.914733, 'lng'...</td>\n",
       "      <td>-22.914733</td>\n",
       "      <td>-43.188829</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>56e04e1d38fa3ae11155b863</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Restaurante Pitada</td>\n",
       "      <td>Brazilian Restaurant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1828</td>\n",
       "      <td>[Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.9097338088607...</td>\n",
       "      <td>-22.909734</td>\n",
       "      <td>-43.191598</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>4ece6782cc219860f521dd5d</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Restaurant El Duero</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Navio Soberano</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2849</td>\n",
       "      <td>[Navio Soberano, Rio de Janeiro, RJ, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.8928508209919...</td>\n",
       "      <td>-22.892851</td>\n",
       "      <td>-43.189795</td>\n",
       "      <td>NaN</td>\n",
       "      <td>RJ</td>\n",
       "      <td>50e0b634e4b0f94bd8a38f47</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Restaurante Braga</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Silva paulet esquina com costa barros</td>\n",
       "      <td>BR</td>\n",
       "      <td>Fortaleza</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>Aldeota</td>\n",
       "      <td>431</td>\n",
       "      <td>[Silva paulet esquina com costa barros (Aldeot...</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.9148909, 'lng...</td>\n",
       "      <td>-22.914891</td>\n",
       "      <td>-43.209306</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Ce</td>\n",
       "      <td>4e0209e4b0fbdf39a4592821</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Restaurante Elo Perdido</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>BR</td>\n",
       "      <td>Rio de Janeiro</td>\n",
       "      <td>Brasil</td>\n",
       "      <td>NaN</td>\n",
       "      <td>577</td>\n",
       "      <td>[Rio de Janeiro, RJ, 20270-150, Brasil]</td>\n",
       "      <td>[{'label': 'display', 'lat': -22.911201, 'lng'...</td>\n",
       "      <td>-22.911201</td>\n",
       "      <td>-43.215000</td>\n",
       "      <td>20270-150</td>\n",
       "      <td>RJ</td>\n",
       "      <td>5a96d21ba9fe124ff5a2f604</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      name            categories  \\\n",
       "0           Ri치 Restaurant                Bistro   \n",
       "1       Restaurante Pitada  Brazilian Restaurant   \n",
       "2      Restaurant El Duero            Restaurant   \n",
       "3        Restaurante Braga            Restaurant   \n",
       "4  Restaurante Elo Perdido            Restaurant   \n",
       "\n",
       "                                 address  cc            city country  \\\n",
       "0                     Rua Riachuelo, 242  BR  Rio de Janeiro  Brasil   \n",
       "1                                    NaN  BR  Rio de Janeiro  Brasil   \n",
       "2                         Navio Soberano  BR  Rio de Janeiro  Brasil   \n",
       "3  Silva paulet esquina com costa barros  BR       Fortaleza  Brasil   \n",
       "4                                    NaN  BR  Rio de Janeiro  Brasil   \n",
       "\n",
       "  crossStreet  distance                                   formattedAddress  \\\n",
       "0         NaN      2146   [Rua Riachuelo, 242, Rio de Janeiro, RJ, Brasil]   \n",
       "1         NaN      1828                       [Rio de Janeiro, RJ, Brasil]   \n",
       "2         NaN      2849       [Navio Soberano, Rio de Janeiro, RJ, Brasil]   \n",
       "3     Aldeota       431  [Silva paulet esquina com costa barros (Aldeot...   \n",
       "4         NaN       577            [Rio de Janeiro, RJ, 20270-150, Brasil]   \n",
       "\n",
       "                                      labeledLatLngs        lat        lng  \\\n",
       "0  [{'label': 'display', 'lat': -22.914733, 'lng'... -22.914733 -43.188829   \n",
       "1  [{'label': 'display', 'lat': -22.9097338088607... -22.909734 -43.191598   \n",
       "2  [{'label': 'display', 'lat': -22.8928508209919... -22.892851 -43.189795   \n",
       "3  [{'label': 'display', 'lat': -22.9148909, 'lng... -22.914891 -43.209306   \n",
       "4  [{'label': 'display', 'lat': -22.911201, 'lng'... -22.911201 -43.215000   \n",
       "\n",
       "  postalCode state                        id  \n",
       "0        NaN    RJ  56e04e1d38fa3ae11155b863  \n",
       "1        NaN    RJ  4ece6782cc219860f521dd5d  \n",
       "2        NaN    RJ  50e0b634e4b0f94bd8a38f47  \n",
       "3        NaN    Ce  4e0209e4b0fbdf39a4592821  \n",
       "4  20270-150    RJ  5a96d21ba9fe124ff5a2f604  "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# keep only columns that include venue name, and anything that is associated with location\n",
    "filtered_columns = ['name', 'categories'] + [col for col in dataframe.columns if col.startswith('location.')] + ['id']\n",
    "dataframe_filtered = dataframe.loc[:, filtered_columns]\n",
    "\n",
    "# function that extracts the category of the venue\n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "# filter the category for each row\n",
    "dataframe_filtered['categories'] = dataframe_filtered.apply(get_category_type, axis=1)\n",
    "\n",
    "# clean column names by keeping only last term\n",
    "dataframe_filtered.columns = [column.split('.')[-1] for column in dataframe_filtered.columns]\n",
    "\n",
    "dataframe_filtered.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDggewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbLTIyLjkxMTAxMzcsLTQzLjIwOTM3MjddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzhjMTMwMTAyOThiYTQ3OWRhYzVkMGE5NmY2ZGQyMTQxID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83NmIxOWU5MzdhYWE0NDMxYWYxM2UyNGRkY2FlODBhOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTEwMTM3LC00My4yMDkzNzI3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogInJlZCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogInJlZCIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogMTAsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGFkOWQxZTcxMmQwNDJhN2I3N2VmMGIzMzg5M2Q2MjcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2MyNzA1MjNjMjI2NDY4YjhmYzQ4N2ZhMzg3NGJlNTMgPSAkKCc8ZGl2IGlkPSJodG1sXzdjMjcwNTIzYzIyNjQ2OGI4ZmM0ODdmYTM4NzRiZTUzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db25yYWQgSG90ZWw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRhZDlkMWU3MTJkMDQyYTdiNzdlZjBiMzM4OTNkNjI3LnNldENvbnRlbnQoaHRtbF83YzI3MDUyM2MyMjY0NjhiOGZjNDg3ZmEzODc0YmU1Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83NmIxOWU5MzdhYWE0NDMxYWYxM2UyNGRkY2FlODBhOC5iaW5kUG9wdXAocG9wdXBfNGFkOWQxZTcxMmQwNDJhN2I3N2VmMGIzMzg5M2Q2MjcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWFhNjM5ZjE5N2JlNDJlOWI2ZmNmOWEzODJhZWVjZjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE0NzMzLC00My4xODg4MjldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzgwMGQ3NGI4OTVlNDQ5NjlhYTA0NGQzNTEyMWRhN2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGUxZWY5ZjEwNzNlNDBiZjgzMmVjY2Q3Yjk4NWEyZGEgPSAkKCc8ZGl2IGlkPSJodG1sX2RlMWVmOWYxMDczZTQwYmY4MzJlY2NkN2I5ODVhMmRhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXN0cm88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc4MDBkNzRiODk1ZTQ0OTY5YWEwNDRkMzUxMjFkYTdlLnNldENvbnRlbnQoaHRtbF9kZTFlZjlmMTA3M2U0MGJmODMyZWNjZDdiOTg1YTJkYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85YWE2MzlmMTk3YmU0MmU5YjZmY2Y5YTM4MmFlZWNmOC5iaW5kUG9wdXAocG9wdXBfNzgwMGQ3NGI4OTVlNDQ5NjlhYTA0NGQzNTEyMWRhN2UpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjk0NmNmNzk2NzhhNGJlMmIzMGFiOWU5NGVlNGMxMzggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTA5NzMzODA4ODYwNzU0LC00My4xOTE1OTc5Mjk1MzYwOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85Y2ZmNjBmMjNmNmY0ZDg0OTA4ZjI1NjY2M2FlZTQyMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83N2ZjMTNmY2RmNjQ0MmI5Yjc1ODU1OTFhMThhOGUwMCA9ICQoJzxkaXYgaWQ9Imh0bWxfNzdmYzEzZmNkZjY0NDJiOWI3NTg1NTkxYTE4YThlMDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85Y2ZmNjBmMjNmNmY0ZDg0OTA4ZjI1NjY2M2FlZTQyMy5zZXRDb250ZW50KGh0bWxfNzdmYzEzZmNkZjY0NDJiOWI3NTg1NTkxYTE4YThlMDApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjk0NmNmNzk2NzhhNGJlMmIzMGFiOWU5NGVlNGMxMzguYmluZFBvcHVwKHBvcHVwXzljZmY2MGYyM2Y2ZjRkODQ5MDhmMjU2NjYzYWVlNDIzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ0M2E4OGJjY2JkNTQ3YzQ5ZTgzMmMzZWQ3OTIxMjIxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjg5Mjg1MDgyMDk5MTksLTQzLjE4OTc5NTEzMjI0MDc1NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80OWQyMDgzNWY5Nzc0ZjMwYmNkODJjYmQzYmZiZjY1OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wYmFiZTFhY2M3OGY0ZmE1YWZkZGIxNWRlYTEwMDNlZSA9ICQoJzxkaXYgaWQ9Imh0bWxfMGJhYmUxYWNjNzhmNGZhNWFmZGRiMTVkZWExMDAzZWUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQ5ZDIwODM1Zjk3NzRmMzBiY2Q4MmNiZDNiZmJmNjU5LnNldENvbnRlbnQoaHRtbF8wYmFiZTFhY2M3OGY0ZmE1YWZkZGIxNWRlYTEwMDNlZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80NDNhODhiY2NiZDU0N2M0OWU4MzJjM2VkNzkyMTIyMS5iaW5kUG9wdXAocG9wdXBfNDlkMjA4MzVmOTc3NGYzMGJjZDgyY2JkM2JmYmY2NTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzcwYTg0MWY3NjlhNGY3MmI1ZDUwZmFiNWI5NjQ5OTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE0ODkwOSwtNDMuMjA5MzA1Njk5OTk5OTk0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Q2MGYzYzQ0M2I2MTRkOWViMjgxMmU3MThlZTAxYzgzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEzMmRlMjJlZTRkZDQ0YjA5ZTBhODhlZWQzODJiNTFjID0gJCgnPGRpdiBpZD0iaHRtbF8xMzJkZTIyZWU0ZGQ0NGIwOWUwYTg4ZWVkMzgyYjUxYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDYwZjNjNDQzYjYxNGQ5ZWIyODEyZTcxOGVlMDFjODMuc2V0Q29udGVudChodG1sXzEzMmRlMjJlZTRkZDQ0YjA5ZTBhODhlZWQzODJiNTFjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc3MGE4NDFmNzY5YTRmNzJiNWQ1MGZhYjViOTY0OTk5LmJpbmRQb3B1cChwb3B1cF9kNjBmM2M0NDNiNjE0ZDllYjI4MTJlNzE4ZWUwMWM4Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wMWZhYWIxMTUwNjY0OWI4ODc4MDU1Y2IzZGUxZjMzYSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTEyMDEsLTQzLjIxNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84Yjg4NTcyZmM4YTA0MmViODFkNDljYmI3NzQ5YmNhZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MjQzMDlmOGY0ZjE0MDg2ODA4NmZkZDQzYzViMDA3NyA9ICQoJzxkaXYgaWQ9Imh0bWxfNDI0MzA5ZjhmNGYxNDA4NjgwODZmZGQ0M2M1YjAwNzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzhiODg1NzJmYzhhMDQyZWI4MWQ0OWNiYjc3NDliY2FkLnNldENvbnRlbnQoaHRtbF80MjQzMDlmOGY0ZjE0MDg2ODA4NmZkZDQzYzViMDA3Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wMWZhYWIxMTUwNjY0OWI4ODc4MDU1Y2IzZGUxZjMzYS5iaW5kUG9wdXAocG9wdXBfOGI4ODU3MmZjOGEwNDJlYjgxZDQ5Y2JiNzc0OWJjYWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzI1MGE0YjRkNjJiNDM5Y2I3YzU2MGQ4MzJmN2JjZTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTEzOTgxOTY3NjI3MzgyLC00My4yMDc5ODIyOTU2MzYyN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hYmE3MzIyMmFhOTQ0MjA0YmVlY2Y3NjUyYTNjN2U1OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jOTdmMTJkOWUxNDM0YjAyYjFmMGZhYWFiZDlhMjA3MSA9ICQoJzxkaXYgaWQ9Imh0bWxfYzk3ZjEyZDllMTQzNGIwMmIxZjBmYWFhYmQ5YTIwNzEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZyaWVkIENoaWNrZW4gSm9pbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FiYTczMjIyYWE5NDQyMDRiZWVjZjc2NTJhM2M3ZTU5LnNldENvbnRlbnQoaHRtbF9jOTdmMTJkOWUxNDM0YjAyYjFmMGZhYWFiZDlhMjA3MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jMjUwYTRiNGQ2MmI0MzljYjdjNTYwZDgzMmY3YmNlMS5iaW5kUG9wdXAocG9wdXBfYWJhNzMyMjJhYTk0NDIwNGJlZWNmNzY1MmEzYzdlNTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZmY1ZDJhMWIxNjYzNGMxMWE0OTY3YWNhY2RmY2M5MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTEzODQ4MzY0Mjc5MzY3LC00My4yMTMxNjcxNjg5ODUwMjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmI5NzljYWJjNmRjNGZmZjkwMzRkOWM2MzJiODUxZmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTNiNTI0NTkwYTBhNGU4OGI3ODkyMzI1ZDFlMjcxMmYgPSAkKCc8ZGl2IGlkPSJodG1sX2UzYjUyNDU5MGEwYTRlODhiNzg5MjMyNWQxZTI3MTJmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db21mb3J0IEZvb2QgUmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmI5NzljYWJjNmRjNGZmZjkwMzRkOWM2MzJiODUxZmUuc2V0Q29udGVudChodG1sX2UzYjUyNDU5MGEwYTRlODhiNzg5MjMyNWQxZTI3MTJmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2ZmNWQyYTFiMTY2MzRjMTFhNDk2N2FjYWNkZmNjOTI0LmJpbmRQb3B1cChwb3B1cF8yYjk3OWNhYmM2ZGM0ZmZmOTAzNGQ5YzYzMmI4NTFmZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80YzIwZWU4ZDI5ODU0NWY0YjAwMTYzNmE4MDUyNDc0MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTMwOTcsLTQzLjIxNDU5Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zOTRjOTdmMzczZTk0MmU0YjA1N2Q4MGY4ZmY1MWYxOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kYmEyODVhYjU4MjY0ZWJhODgxZWM1YjM2MGFiYmI2OCA9ICQoJzxkaXYgaWQ9Imh0bWxfZGJhMjg1YWI1ODI2NGViYTg4MWVjNWIzNjBhYmJiNjgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM5NGM5N2YzNzNlOTQyZTRiMDU3ZDgwZjhmZjUxZjE5LnNldENvbnRlbnQoaHRtbF9kYmEyODVhYjU4MjY0ZWJhODgxZWM1YjM2MGFiYmI2OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80YzIwZWU4ZDI5ODU0NWY0YjAwMTYzNmE4MDUyNDc0My5iaW5kUG9wdXAocG9wdXBfMzk0Yzk3ZjM3M2U5NDJlNGIwNTdkODBmOGZmNTFmMTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjA0Nzk0ZTlkMTFlNDRmNDkyMzljMDg1MDczOGZkNWMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTExODcyNTcyMTU2ODYzLC00My4yMTc4NTUzOTYwNjY1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZmZWE0OGNjN2NkODQ4ZmU5YTJiMGU5MjEzMzM3MmNjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdhZGYxNzI4NGE3OTRlYzk5NGQyYzdjNTBlNjgxNDAxID0gJCgnPGRpdiBpZD0iaHRtbF83YWRmMTcyODRhNzk0ZWM5OTRkMmM3YzUwZTY4MTQwMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmZlYTQ4Y2M3Y2Q4NDhmZTlhMmIwZTkyMTMzMzcyY2Muc2V0Q29udGVudChodG1sXzdhZGYxNzI4NGE3OTRlYzk5NGQyYzdjNTBlNjgxNDAxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2IwNDc5NGU5ZDExZTQ0ZjQ5MjM5YzA4NTA3MzhmZDVjLmJpbmRQb3B1cChwb3B1cF82ZmVhNDhjYzdjZDg0OGZlOWEyYjBlOTIxMzMzNzJjYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82NjQ4YTQ1YmE3ZDg0OTllYjQ4NzBiNDNiNTIyZjkyNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTQzMzEsLTQzLjIwNDE5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMmZjY2E2M2Y5NTg0OTI5YjMwYmIwN2FkOTEyZjllMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zODg4MDkzMWY4NWI0OWE5OThiMTg3ZjNiOGY1NmRkMSA9ICQoJzxkaXYgaWQ9Imh0bWxfMzg4ODA5MzFmODViNDlhOTk4YjE4N2YzYjhmNTZkZDEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyZmNjYTYzZjk1ODQ5MjliMzBiYjA3YWQ5MTJmOWUyLnNldENvbnRlbnQoaHRtbF8zODg4MDkzMWY4NWI0OWE5OThiMTg3ZjNiOGY1NmRkMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82NjQ4YTQ1YmE3ZDg0OTllYjQ4NzBiNDNiNTIyZjkyNi5iaW5kUG9wdXAocG9wdXBfZDJmY2NhNjNmOTU4NDkyOWIzMGJiMDdhZDkxMmY5ZTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjk4MjQ3NGQ5ODJkNGUyOGIxYzU0YThmMzJlODRlYTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE2Nzg4LC00My4yMDgzNDZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2VkMWM2MDc2ZmQyNGVlOGFhNTc2YWE0NjFiMzg4OTQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjliZTdmNzllN2ZmNDcxMmE2MmEwM2RiOGQxNWU4NWQgPSAkKCc8ZGl2IGlkPSJodG1sX2I5YmU3Zjc5ZTdmZjQ3MTJhNjJhMDNkYjhkMTVlODVkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZWQxYzYwNzZmZDI0ZWU4YWE1NzZhYTQ2MWIzODg5NC5zZXRDb250ZW50KGh0bWxfYjliZTdmNzllN2ZmNDcxMmE2MmEwM2RiOGQxNWU4NWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjk4MjQ3NGQ5ODJkNGUyOGIxYzU0YThmMzJlODRlYTEuYmluZFBvcHVwKHBvcHVwXzdlZDFjNjA3NmZkMjRlZThhYTU3NmFhNDYxYjM4ODk0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzNhY2YyNzQ1NTc4MjRhMWVhM2NlNGJlNzNjZDA0NjM0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxMjA5NjAxMjkxNTM4LC00My4yMDE5MzE2MDQyNzg5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83ZWY4NWE3Njk3YWI0Yjc1YWZiNDJhZTliMjBiZjQwZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yNzY0MjdkYjU1NDk0NTI2Yjk3NjRlMmJkMmVjNzU1YyA9ICQoJzxkaXYgaWQ9Imh0bWxfMjc2NDI3ZGI1NTQ5NDUyNmI5NzY0ZTJiZDJlYzc1NWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZWY4NWE3Njk3YWI0Yjc1YWZiNDJhZTliMjBiZjQwZC5zZXRDb250ZW50KGh0bWxfMjc2NDI3ZGI1NTQ5NDUyNmI5NzY0ZTJiZDJlYzc1NWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfM2FjZjI3NDU1NzgyNGExZWEzY2U0YmU3M2NkMDQ2MzQuYmluZFBvcHVwKHBvcHVwXzdlZjg1YTc2OTdhYjRiNzVhZmI0MmFlOWIyMGJmNDBkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU4ZTE2NzU1ZWZlNDRjNjNhMzVmZGNmYWZhMjljMTc3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxMTcwNiwtNDMuMjAyNTk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc3NDYzOTI0OTM3YjRhZjFhNDM2NzQzNTc0MmE0M2E0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhiYmIzODBkMWYzMDQ4ZDFhNjUxZjdkMmJjNmMzYTIxID0gJCgnPGRpdiBpZD0iaHRtbF84YmJiMzgwZDFmMzA0OGQxYTY1MWY3ZDJiYzZjM2EyMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzc0NjM5MjQ5MzdiNGFmMWE0MzY3NDM1NzQyYTQzYTQuc2V0Q29udGVudChodG1sXzhiYmIzODBkMWYzMDQ4ZDFhNjUxZjdkMmJjNmMzYTIxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU4ZTE2NzU1ZWZlNDRjNjNhMzVmZGNmYWZhMjljMTc3LmJpbmRQb3B1cChwb3B1cF83NzQ2MzkyNDkzN2I0YWYxYTQzNjc0MzU3NDJhNDNhNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xNWU4ODkxOWM3OGM0MGE2YTA4MmU1MTA4ODUzYzI3NyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTgyNjUwNzU3MjA4MDcsLTQzLjIwOTM5NTQ3NTQ5MzkzNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMWRhNzM1MjFlOGI0Mzk0YTM0Mzc4MzVkNGY3YzY1ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84M2E5NzEzNGU1NzQ0MWUzYTVkYTlhNDQ0MmViM2YzNyA9ICQoJzxkaXYgaWQ9Imh0bWxfODNhOTcxMzRlNTc0NDFlM2E1ZGE5YTQ0NDJlYjNmMzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QxZGE3MzUyMWU4YjQzOTRhMzQzNzgzNWQ0ZjdjNjVmLnNldENvbnRlbnQoaHRtbF84M2E5NzEzNGU1NzQ0MWUzYTVkYTlhNDQ0MmViM2YzNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xNWU4ODkxOWM3OGM0MGE2YTA4MmU1MTA4ODUzYzI3Ny5iaW5kUG9wdXAocG9wdXBfZDFkYTczNTIxZThiNDM5NGEzNDM3ODM1ZDRmN2M2NWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTllYjQ1Mzc4M2RlNGZiMDhhZjQ3YzBkZjE0NGZjNmUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE1MzEwMzk0MTg1MDgsLTQzLjIxOTk2NzY4MzU1OTUyNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84MjEzYWI2ZDUyMjE0YmMyOTgxMGY1NjY2MzhhMjFmNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mZGI5NTVhOTg3ZmY0ODJkYjBlNjc3ODNiZmY4N2ZjYiA9ICQoJzxkaXYgaWQ9Imh0bWxfZmRiOTU1YTk4N2ZmNDgyZGIwZTY3NzgzYmZmODdmY2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84MjEzYWI2ZDUyMjE0YmMyOTgxMGY1NjY2MzhhMjFmNC5zZXRDb250ZW50KGh0bWxfZmRiOTU1YTk4N2ZmNDgyZGIwZTY3NzgzYmZmODdmY2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTllYjQ1Mzc4M2RlNGZiMDhhZjQ3YzBkZjE0NGZjNmUuYmluZFBvcHVwKHBvcHVwXzgyMTNhYjZkNTIyMTRiYzI5ODEwZjU2NjYzOGEyMWY0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2YzN2I2N2FhNzJjYzQzZjY5OTUxODAzMTBjNzdjYjAxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwNjk2OTA3MDQzNDU3LC00My4yMTU5OTU3ODg1NzQyMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNmFlOWIxZjU5ZGI0MjNiYTQwYjEyMTE3MGQ5ZDk5MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83OGJlZDliYTQwNTk0ODA0ODFmZWIyMzBmMzI2ZTQzNyA9ICQoJzxkaXYgaWQ9Imh0bWxfNzhiZWQ5YmE0MDU5NDgwNDgxZmViMjMwZjMyNmU0MzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNmFlOWIxZjU5ZGI0MjNiYTQwYjEyMTE3MGQ5ZDk5Mi5zZXRDb250ZW50KGh0bWxfNzhiZWQ5YmE0MDU5NDgwNDgxZmViMjMwZjMyNmU0MzcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjM3YjY3YWE3MmNjNDNmNjk5NTE4MDMxMGM3N2NiMDEuYmluZFBvcHVwKHBvcHVwX2I2YWU5YjFmNTlkYjQyM2JhNDBiMTIxMTcwZDlkOTkyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQyMDI0MDQxNTJhNDQ1YjA5ZWQzMWZiMTJhMWE1OWYyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwNzAwOTEyNDc1NTg2LC00My4yMTYxMTAyMjk0OTIxOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82YTcwODFiMDIxNGI0MWZlOTU2Zjc1ZDk4MDU0YmMwNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kYjlkNjUxNWZjZTg0NDcyOTQ0NjQ0NGU2MjA4ZjdiNyA9ICQoJzxkaXYgaWQ9Imh0bWxfZGI5ZDY1MTVmY2U4NDQ3Mjk0NDY0NDRlNjIwOGY3YjciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZvb2Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZhNzA4MWIwMjE0YjQxZmU5NTZmNzVkOTgwNTRiYzA1LnNldENvbnRlbnQoaHRtbF9kYjlkNjUxNWZjZTg0NDcyOTQ0NjQ0NGU2MjA4ZjdiNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80MjAyNDA0MTUyYTQ0NWIwOWVkMzFmYjEyYTFhNTlmMi5iaW5kUG9wdXAocG9wdXBfNmE3MDgxYjAyMTRiNDFmZTk1NmY3NWQ5ODA1NGJjMDUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZjc1OTMyMjU0M2ZhNDc2MDk0YmIyZjc5NjYyZmRjMTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTEyMDU5MDY5MDc1NDEsLTQzLjIwMTg4OTA1ODQ1NzFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODY0MDVhMzY4ZGFiNDAzMTgyYzNiZDY3Njc1MWIxMTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2ZiYjY0YjM1M2QyNDc5OWJmN2I3MTg3YmJjM2QwNTMgPSAkKCc8ZGl2IGlkPSJodG1sX2NmYmI2NGIzNTNkMjQ3OTliZjdiNzE4N2JiYzNkMDUzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXNoICYgQ2hpcHMgU2hvcDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODY0MDVhMzY4ZGFiNDAzMTgyYzNiZDY3Njc1MWIxMTAuc2V0Q29udGVudChodG1sX2NmYmI2NGIzNTNkMjQ3OTliZjdiNzE4N2JiYzNkMDUzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y3NTkzMjI1NDNmYTQ3NjA5NGJiMmY3OTY2MmZkYzE5LmJpbmRQb3B1cChwb3B1cF84NjQwNWEzNjhkYWI0MDMxODJjM2JkNjc2NzUxYjExMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80MTMzOWZmNzQ4NDA0Y2Q4YmUzOTMzNzc4YjBiNGFjZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTkzMDQsLTQzLjIxMTg0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2JhYTg4MzAyMTliNjQ0NmI5YjQwMmU5NzQ1MzhhOGVhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRmZjIyMWMxOTBhYTRiNmU5ZmY3MmM1ZGNhMTZmZGMyID0gJCgnPGRpdiBpZD0iaHRtbF80ZmYyMjFjMTkwYWE0YjZlOWZmNzJjNWRjYTE2ZmRjMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2JhYTg4MzAyMTliNjQ0NmI5YjQwMmU5NzQ1MzhhOGVhLnNldENvbnRlbnQoaHRtbF80ZmYyMjFjMTkwYWE0YjZlOWZmNzJjNWRjYTE2ZmRjMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80MTMzOWZmNzQ4NDA0Y2Q4YmUzOTMzNzc4YjBiNGFjZi5iaW5kUG9wdXAocG9wdXBfYmFhODgzMDIxOWI2NDQ2YjliNDAyZTk3NDUzOGE4ZWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODc1MDMwM2MwNzE4NGRjN2E2ZmI2NTM0NzI2YTc4NWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTExNDM2OTU1NDIxOTIzLC00My4yMTkwNjUxOTAxNTQzNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zN2RjZDI3ZjM3MDc0NWY1OTA5MjY4OWJkZWUzYzA5NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83MTZjODYzZjUyMGQ0YjEzOWI4MjFlMDFjOTM2NWQyZCA9ICQoJzxkaXYgaWQ9Imh0bWxfNzE2Yzg2M2Y1MjBkNGIxMzliODIxZTAxYzkzNjVkMmQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM3ZGNkMjdmMzcwNzQ1ZjU5MDkyNjg5YmRlZTNjMDk2LnNldENvbnRlbnQoaHRtbF83MTZjODYzZjUyMGQ0YjEzOWI4MjFlMDFjOTM2NWQyZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84NzUwMzAzYzA3MTg0ZGM3YTZmYjY1MzQ3MjZhNzg1ZC5iaW5kUG9wdXAocG9wdXBfMzdkY2QyN2YzNzA3NDVmNTkwOTI2ODliZGVlM2MwOTYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODgxZjgzOWMyN2FiNGM5Nzg5YTkyZjM2MDMxYzg3NmIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTY0ODA0ODM5ODEwNTM3LC00My4xNzMxMzUzNjk0MDQyM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wY2U5N2E4ODQwZTg0ZjQ3YTIyOTVmN2NlODJmOWE4NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wZDlhZmUzNmJmYjQ0MGQwOGIzMmZjYmVjMDg5YjIzZCA9ICQoJzxkaXYgaWQ9Imh0bWxfMGQ5YWZlMzZiZmI0NDBkMDhiMzJmY2JlYzA4OWIyM2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyZWFrZmFzdCBTcG90PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wY2U5N2E4ODQwZTg0ZjQ3YTIyOTVmN2NlODJmOWE4Ni5zZXRDb250ZW50KGh0bWxfMGQ5YWZlMzZiZmI0NDBkMDhiMzJmY2JlYzA4OWIyM2QpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODgxZjgzOWMyN2FiNGM5Nzg5YTkyZjM2MDMxYzg3NmIuYmluZFBvcHVwKHBvcHVwXzBjZTk3YTg4NDBlODRmNDdhMjI5NWY3Y2U4MmY5YTg2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q5MGZmNWIzNjhlOTRmNDI4YjE0YjcyMTIwNjAwMmVjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwOTY4OTg1Mzk0OTM1MiwtNDMuMjAxNDIxMDUyMDQxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGM4YjkwZWMzYWMyNDc4MWEzNDdjZGY3OTc5MWJlYjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWNmNmJmNmNhZmI3NDg0MWFhYWEyZDE2Y2Y1N2Q5ZmUgPSAkKCc8ZGl2IGlkPSJodG1sX2FjZjZiZjZjYWZiNzQ4NDFhYWFhMmQxNmNmNTdkOWZlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EdW1wbGluZyBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYzhiOTBlYzNhYzI0NzgxYTM0N2NkZjc5NzkxYmViMy5zZXRDb250ZW50KGh0bWxfYWNmNmJmNmNhZmI3NDg0MWFhYWEyZDE2Y2Y1N2Q5ZmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDkwZmY1YjM2OGU5NGY0MjhiMTRiNzIxMjA2MDAyZWMuYmluZFBvcHVwKHBvcHVwXzBjOGI5MGVjM2FjMjQ3ODFhMzQ3Y2RmNzk3OTFiZWIzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMzZGIyMjAzZDJmMDQ0OGFiZmI2OGJmZjZiYjRlMjgzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwMjM2NTY5Njc4NjkyLC00My4yMDY3MTU0MTYxMTY2N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kZGRmMzEzZjc1ZGU0NDBlYTQ1ZGZkY2QyYTE0MjllMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xYWUxZGYxZGZhYzQ0Y2ZlYjdmZjg3MTY5NGYwOWY3MSA9ICQoJzxkaXYgaWQ9Imh0bWxfMWFlMWRmMWRmYWM0NGNmZWI3ZmY4NzE2OTRmMDlmNzEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2RkZGYzMTNmNzVkZTQ0MGVhNDVkZmRjZDJhMTQyOWUyLnNldENvbnRlbnQoaHRtbF8xYWUxZGYxZGZhYzQ0Y2ZlYjdmZjg3MTY5NGYwOWY3MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zM2RiMjIwM2QyZjA0NDhhYmZiNjhiZmY2YmI0ZTI4My5iaW5kUG9wdXAocG9wdXBfZGRkZjMxM2Y3NWRlNDQwZWE0NWRmZGNkMmExNDI5ZTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZmU1OWUyZmQwNzVhNDJkNzk3NDhmMWMwOTA5NTI3NWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTEyMDQ5NjU0Mjk2NTk1LC00My4yMDI3NTg4NzY5OTgwNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jYTk3NGM0ZDJkZjM0MDc1ODlkZTZjZGY5ZjRkMjY4NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMWYzMDVmZWFmMzQ0MTVjYWYwYTgzNzIyNDdlNmMxMiA9ICQoJzxkaXYgaWQ9Imh0bWxfMjFmMzA1ZmVhZjM0NDE1Y2FmMGE4MzcyMjQ3ZTZjMTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jYTk3NGM0ZDJkZjM0MDc1ODlkZTZjZGY5ZjRkMjY4Ni5zZXRDb250ZW50KGh0bWxfMjFmMzA1ZmVhZjM0NDE1Y2FmMGE4MzcyMjQ3ZTZjMTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZmU1OWUyZmQwNzVhNDJkNzk3NDhmMWMwOTA5NTI3NWQuYmluZFBvcHVwKHBvcHVwX2NhOTc0YzRkMmRmMzQwNzU4OWRlNmNkZjlmNGQyNjg2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMxZjQzYzRjNTVhZTQ4Y2E4YzFkNGE3MzEwODVlMDdhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjk3MTM4NSwtNDMuMTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWZjMzIyYTZkNTRkNDBmZTg5OWFlNTNkZGFmNjQwMzYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmZlNzQ1NThhYjJmNGUyZDkzMDY0MTA0ZDRiM2Q1YWMgPSAkKCc8ZGl2IGlkPSJodG1sXzZmZTc0NTU4YWIyZjRlMmQ5MzA2NDEwNGQ0YjNkNWFjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CcmVha2Zhc3QgU3BvdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWZjMzIyYTZkNTRkNDBmZTg5OWFlNTNkZGFmNjQwMzYuc2V0Q29udGVudChodG1sXzZmZTc0NTU4YWIyZjRlMmQ5MzA2NDEwNGQ0YjNkNWFjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMxZjQzYzRjNTVhZTQ4Y2E4YzFkNGE3MzEwODVlMDdhLmJpbmRQb3B1cChwb3B1cF8xZmMzMjJhNmQ1NGQ0MGZlODk5YWU1M2RkYWY2NDAzNik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xNDA1YThiZTQ1ZDc0NmUxOGE3ZjZkM2FjZjc0ZmYzYSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MDQ3Mzk0MDcxMTM2MiwtNDMuMjEyODA0MTkxMjIzMTE0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzlhMTdmN2RmMjdiYzQ0NjE5MmRkNmUwNzQyNjM5ODVjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzUzMTE4ZGE2MGRhNjQ1MWM4ODZjMzk1N2VkNWQxY2ExID0gJCgnPGRpdiBpZD0iaHRtbF81MzExOGRhNjBkYTY0NTFjODg2YzM5NTdlZDVkMWNhMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlhMTdmN2RmMjdiYzQ0NjE5MmRkNmUwNzQyNjM5ODVjLnNldENvbnRlbnQoaHRtbF81MzExOGRhNjBkYTY0NTFjODg2YzM5NTdlZDVkMWNhMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xNDA1YThiZTQ1ZDc0NmUxOGE3ZjZkM2FjZjc0ZmYzYS5iaW5kUG9wdXAocG9wdXBfOWExN2Y3ZGYyN2JjNDQ2MTkyZGQ2ZTA3NDI2Mzk4NWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjUwMGI3YTY2MDQzNDNiYzg1ZmY3MmNmOWY5MDNlZjEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTA0MDEyODk5MjkyOTQ3LC00My4yMTUxMDk2MjI1NTk2NjZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzkxMDc5ODUyMWM1NDFmYTg4ZWU5MTk4NTUxMGYxM2QgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjUzNDExMTRjNDViNGJhYjlkMTFlYTIyZGIyYjhjYjggPSAkKCc8ZGl2IGlkPSJodG1sXzI1MzQxMTE0YzQ1YjRiYWI5ZDExZWEyMmRiMmI4Y2I4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Gb29kIFRydWNrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zOTEwNzk4NTIxYzU0MWZhODhlZTkxOTg1NTEwZjEzZC5zZXRDb250ZW50KGh0bWxfMjUzNDExMTRjNDViNGJhYjlkMTFlYTIyZGIyYjhjYjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjUwMGI3YTY2MDQzNDNiYzg1ZmY3MmNmOWY5MDNlZjEuYmluZFBvcHVwKHBvcHVwXzM5MTA3OTg1MjFjNTQxZmE4OGVlOTE5ODU1MTBmMTNkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk4MDc5OTUxMDg5YTQ0NGNhYWYxYjcwYjIyZmQ3ZDRmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwNTA0NTYwODQyODU5OCwtNDMuMjExNjg1ODAzNDkxMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDlhZTVlNjk2Yzc2NDQ3NzhjYmY3YTc2OTg2YzE1NjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWMwYzU2ZTdiOTNjNDYzNzliZWMzYjE3OTA0ODQ5YTcgPSAkKCc8ZGl2IGlkPSJodG1sX2VjMGM1NmU3YjkzYzQ2Mzc5YmVjM2IxNzkwNDg0OWE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CcmF6aWxpYW4gUmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDlhZTVlNjk2Yzc2NDQ3NzhjYmY3YTc2OTg2YzE1NjYuc2V0Q29udGVudChodG1sX2VjMGM1NmU3YjkzYzQ2Mzc5YmVjM2IxNzkwNDg0OWE3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk4MDc5OTUxMDg5YTQ0NGNhYWYxYjcwYjIyZmQ3ZDRmLmJpbmRQb3B1cChwb3B1cF80OWFlNWU2OTZjNzY0NDc3OGNiZjdhNzY5ODZjMTU2Nik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82Yzg0MzdhZWQ0Nzg0ZjRlOGE2NjhkNjI1ODE4MGQ3MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MDY0NTM0NzA3MjU5MzYsLTQzLjIxNzk0OTkxMjI3ODA1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQxYjY4ZjNiMzhhYjQ5MzFhM2E2ZTMzNmVmOTFjZGE4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRmYzU0ODVjMDIxZjRmZGQ4YWQzZGI2YTA1MWJjMjgwID0gJCgnPGRpdiBpZD0iaHRtbF80ZmM1NDg1YzAyMWY0ZmRkOGFkM2RiNmEwNTFiYzI4MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmFzdCBGb29kIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQxYjY4ZjNiMzhhYjQ5MzFhM2E2ZTMzNmVmOTFjZGE4LnNldENvbnRlbnQoaHRtbF80ZmM1NDg1YzAyMWY0ZmRkOGFkM2RiNmEwNTFiYzI4MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82Yzg0MzdhZWQ0Nzg0ZjRlOGE2NjhkNjI1ODE4MGQ3MS5iaW5kUG9wdXAocG9wdXBfNDFiNjhmM2IzOGFiNDkzMWEzYTZlMzM2ZWY5MWNkYTgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTNkZWRmMmUwNjc2NDNkNGJmMDAyOGE0Zjc2YTA4M2QgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE5OTA3LC00My4yMTE2MzJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDRiYTJjNmM4NzQ3NDE2Y2E2OTEyMjEzZTdlNTEyOTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGU2ZWMzNzliYzRlNDY2NjhiZTEyOGZjN2U4NzYxNWIgPSAkKCc8ZGl2IGlkPSJodG1sX2RlNmVjMzc5YmM0ZTQ2NjY4YmUxMjhmYzdlODc2MTViIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80NGJhMmM2Yzg3NDc0MTZjYTY5MTIyMTNlN2U1MTI5NS5zZXRDb250ZW50KGh0bWxfZGU2ZWMzNzliYzRlNDY2NjhiZTEyOGZjN2U4NzYxNWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTNkZWRmMmUwNjc2NDNkNGJmMDAyOGE0Zjc2YTA4M2QuYmluZFBvcHVwKHBvcHVwXzQ0YmEyYzZjODc0NzQxNmNhNjkxMjIxM2U3ZTUxMjk1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzIzYjkwMmRjMmJhNTRlNjc5ZTI0YjA0MzM0YTFkYjYzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkwOTk2MzU2MDY5MzE1NCwtNDMuMTk5MDMzNjc4ODUzMjA1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJkMDZjMWJkNDhiYjRmYzBiYWE2YWNjNGQ3MDVkNjNmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY4Y2Y4ZWU4ZjZkYTQ2OWM5ZTNjOGU1OTVlZDU4Njg4ID0gJCgnPGRpdiBpZD0iaHRtbF82OGNmOGVlOGY2ZGE0NjljOWUzYzhlNTk1ZWQ1ODY4OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJkMDZjMWJkNDhiYjRmYzBiYWE2YWNjNGQ3MDVkNjNmLnNldENvbnRlbnQoaHRtbF82OGNmOGVlOGY2ZGE0NjljOWUzYzhlNTk1ZWQ1ODY4OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yM2I5MDJkYzJiYTU0ZTY3OWUyNGIwNDMzNGExZGI2My5iaW5kUG9wdXAocG9wdXBfMmQwNmMxYmQ0OGJiNGZjMGJhYTZhY2M0ZDcwNWQ2M2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTRhMDBjZTk3YWRlNDAyZDgyMjk1ZjIzNDE1MzM3MzMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE5OTQ2NzAzMTMzMDEsLTQzLjIxMzQ1NTQ2OTc1NjQ4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgzZTljMzUyNjc5NDQzMDdiNWM5OTM1OGMxNzdjNzZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M4ZDlhMWJiMThjYjRlNjFhODU3ZjIwYmI5NGRhNWY4ID0gJCgnPGRpdiBpZD0iaHRtbF9jOGQ5YTFiYjE4Y2I0ZTYxYTg1N2YyMGJiOTRkYTVmOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODNlOWMzNTI2Nzk0NDMwN2I1Yzk5MzU4YzE3N2M3NmUuc2V0Q29udGVudChodG1sX2M4ZDlhMWJiMThjYjRlNjFhODU3ZjIwYmI5NGRhNWY4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk0YTAwY2U5N2FkZTQwMmQ4MjI5NWYyMzQxNTMzNzMzLmJpbmRQb3B1cChwb3B1cF84M2U5YzM1MjY3OTQ0MzA3YjVjOTkzNThjMTc3Yzc2ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85ZWZlZjA2ZmM3MzA0MTc5ODJmNWFkYmNmOWNjMWUxOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTE3MTI3MDc0NjU5MjcsLTQzLjIxNDg4NjI0NTU2MDYyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RiZjllZGRmNTkxOTRkNWI4YmIzY2E4M2U1NDcxYjdmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZmODBkYmFlMjZkNDQ0NGY5NDRmMzRkZTgxMTk4ZTFmID0gJCgnPGRpdiBpZD0iaHRtbF9mZjgwZGJhZTI2ZDQ0NDRmOTQ0ZjM0ZGU4MTE5OGUxZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2RiZjllZGRmNTkxOTRkNWI4YmIzY2E4M2U1NDcxYjdmLnNldENvbnRlbnQoaHRtbF9mZjgwZGJhZTI2ZDQ0NDRmOTQ0ZjM0ZGU4MTE5OGUxZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85ZWZlZjA2ZmM3MzA0MTc5ODJmNWFkYmNmOWNjMWUxOC5iaW5kUG9wdXAocG9wdXBfZGJmOWVkZGY1OTE5NGQ1YjhiYjNjYTgzZTU0NzFiN2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTEwMGY3NjRmYzgyNDNhYWJiN2IwZDE0NDk5M2IxYjIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE5NTgsLTQzLjE4NzkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgxYTU1NDc5NDk4OTQ3NzRhYTQ5ZTlhM2VhOWZiNzhiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg4ZWI5ZjVlNThjYjQyZTRhMWE2NzA0NTYyZTJlZmU5ID0gJCgnPGRpdiBpZD0iaHRtbF84OGViOWY1ZTU4Y2I0MmU0YTFhNjcwNDU2MmUyZWZlOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODFhNTU0Nzk0OTg5NDc3NGFhNDllOWEzZWE5ZmI3OGIuc2V0Q29udGVudChodG1sXzg4ZWI5ZjVlNThjYjQyZTRhMWE2NzA0NTYyZTJlZmU5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2ExMDBmNzY0ZmM4MjQzYWFiYjdiMGQxNDQ5OTNiMWIyLmJpbmRQb3B1cChwb3B1cF84MWE1NTQ3OTQ5ODk0Nzc0YWE0OWU5YTNlYTlmYjc4Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kZGRkNTRkMDgxM2I0MmZkOGEzMjIyZWE3YTUzNTIyNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45NzQ5Mzc2NTkyMTE3ODMsLTQzLjE4NzQzMjk3MDYxMDczXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2EyN2M0MzM0NzJjODQwYjRhN2Q0YmNmMjc4YTNkODY2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJlMGRiYWEwZGJlMDQxNjdhNWIxMjBhZGE0NzE0NTVlID0gJCgnPGRpdiBpZD0iaHRtbF8yZTBkYmFhMGRiZTA0MTY3YTViMTIwYWRhNDcxNDU1ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2VhZm9vZCBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMjdjNDMzNDcyYzg0MGI0YTdkNGJjZjI3OGEzZDg2Ni5zZXRDb250ZW50KGh0bWxfMmUwZGJhYTBkYmUwNDE2N2E1YjEyMGFkYTQ3MTQ1NWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGRkZDU0ZDA4MTNiNDJmZDhhMzIyMmVhN2E1MzUyMjQuYmluZFBvcHVwKHBvcHVwX2EyN2M0MzM0NzJjODQwYjRhN2Q0YmNmMjc4YTNkODY2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y3Mjc2ZGY3MmQ1NzQ0YTM4OTgyMWVlZDVmNTMwN2JjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjk4MzAwMzI1MTcwMTUyNSwtNDMuMTk0MDMxNjQ2NjEzODE2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FiNzAxZTFmMzM4MjQ1MjU5NzkxYzc0ZGVhMzI3MTk3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkxNjA1Y2QyNDZiMzQ5YmM5NjljZDU3ZjBlYjllYWFiID0gJCgnPGRpdiBpZD0iaHRtbF85MTYwNWNkMjQ2YjM0OWJjOTY5Y2Q1N2YwZWI5ZWFhYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYWI3MDFlMWYzMzgyNDUyNTk3OTFjNzRkZWEzMjcxOTcuc2V0Q29udGVudChodG1sXzkxNjA1Y2QyNDZiMzQ5YmM5NjljZDU3ZjBlYjllYWFiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y3Mjc2ZGY3MmQ1NzQ0YTM4OTgyMWVlZDVmNTMwN2JjLmJpbmRQb3B1cChwb3B1cF9hYjcwMWUxZjMzODI0NTI1OTc5MWM3NGRlYTMyNzE5Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMjcwNDliMzg0MjE0NTNkOGNjOGVjMjgyNzI2NmMxNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTkxNTUyOTQ5Njg2NzUsLTQzLjIxMzkyMTQyMzczMTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM4YTA4M2Y4NGQ3ZDQwNTRiOGNlMDYzZTY0MDUyOGQ5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJiZWEzNWU3OGMwZTRkZGQ4MTgyYmZhMWI4ODIxMmIzID0gJCgnPGRpdiBpZD0iaHRtbF8yYmVhMzVlNzhjMGU0ZGRkODE4MmJmYTFiODgyMTJiMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U291dGggQW1lcmljYW4gUmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzhhMDgzZjg0ZDdkNDA1NGI4Y2UwNjNlNjQwNTI4ZDkuc2V0Q29udGVudChodG1sXzJiZWEzNWU3OGMwZTRkZGQ4MTgyYmZhMWI4ODIxMmIzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzIyNzA0OWIzODQyMTQ1M2Q4Y2M4ZWMyODI3MjY2YzE3LmJpbmRQb3B1cChwb3B1cF8zOGEwODNmODRkN2Q0MDU0YjhjZTA2M2U2NDA1MjhkOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xNmEzMTQ5MTQwOTg0OTE4OWYxNjc2NWU5OGVjZTk1YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTk1MjgxMzQzNTM5NywtNDMuMjExNzc4ODQ1ODc3Nl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jZDdjNjM0NWQyZTU0YmIxYWQ1NWU1MzM1OGE2OGQ1MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wZDAyYjQ5MDFkMDg0OGFlYjBkYmUyNjY5NjQ3MDVmZiA9ICQoJzxkaXYgaWQ9Imh0bWxfMGQwMmI0OTAxZDA4NDhhZWIwZGJlMjY2OTY0NzA1ZmYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jZDdjNjM0NWQyZTU0YmIxYWQ1NWU1MzM1OGE2OGQ1MS5zZXRDb250ZW50KGh0bWxfMGQwMmI0OTAxZDA4NDhhZWIwZGJlMjY2OTY0NzA1ZmYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTZhMzE0OTE0MDk4NDkxODlmMTY3NjVlOThlY2U5NWMuYmluZFBvcHVwKHBvcHVwX2NkN2M2MzQ1ZDJlNTRiYjFhZDU1ZTUzMzU4YTY4ZDUxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFkZDM4NjY2YTU2MTQ3ZmI4Yjc0MmVmMDAxMWI4NGZjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkyMTU1NCwtNDMuMTg3ODg5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0MjFmZDU0MjE0YzQ4ZTE5N2FlN2E2NTAyZDFjYzkwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M4ZDk4Yjg5N2VlNDRlMTM4ZjNjOTVhNDFkYTlhMGQxID0gJCgnPGRpdiBpZD0iaHRtbF9jOGQ5OGI4OTdlZTQ0ZTEzOGYzYzk1YTQxZGE5YTBkMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9vZiBEZWNrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84NDIxZmQ1NDIxNGM0OGUxOTdhZTdhNjUwMmQxY2M5MC5zZXRDb250ZW50KGh0bWxfYzhkOThiODk3ZWU0NGUxMzhmM2M5NWE0MWRhOWEwZDEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWRkMzg2NjZhNTYxNDdmYjhiNzQyZWYwMDExYjg0ZmMuYmluZFBvcHVwKHBvcHVwXzg0MjFmZDU0MjE0YzQ4ZTE5N2FlN2E2NTAyZDFjYzkwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzNjYmMyMThkODI0NDRhZDNhZGRhM2M1NTUyYTIwMTQxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxOTQ4ODU4NTQ1MjE4LC00My4yMTE4OTE0Njg4MzgxOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85OWZmMTJkNTdkY2E0MDZmODQ1ZGQwNDM1ZjQ4OTFhZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ZWE1NDE1YmM0OTQ0ZGU0YTQ4NGE0MWU3M2IzZTYwOCA9ICQoJzxkaXYgaWQ9Imh0bWxfN2VhNTQxNWJjNDk0NGRlNGE0ODRhNDFlNzNiM2U2MDgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85OWZmMTJkNTdkY2E0MDZmODQ1ZGQwNDM1ZjQ4OTFhZS5zZXRDb250ZW50KGh0bWxfN2VhNTQxNWJjNDk0NGRlNGE0ODRhNDFlNzNiM2U2MDgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfM2NiYzIxOGQ4MjQ0NGFkM2FkZGEzYzU1NTJhMjAxNDEuYmluZFBvcHVwKHBvcHVwXzk5ZmYxMmQ1N2RjYTQwNmY4NDVkZDA0MzVmNDg5MWFlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhiOTMxM2E1ZWM3MDRhNTg4MGJhNjlmMGM1YTYwNzJjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxMTE0MzMxNzczNTY4NiwtNDMuMjAyODMyNTc5OTAzMjY2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RjMWViZTk4NGE3ODRjMmJiYjZjNjc2YzBkZDAwZTdlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE2ZmEwNTdjMGUyZjQ0ZTA4Y2UyZmY3NGY4NGY5MTQ1ID0gJCgnPGRpdiBpZD0iaHRtbF8xNmZhMDU3YzBlMmY0NGUwOGNlMmZmNzRmODRmOTE0NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q29ycG9yYXRlIENhZmV0ZXJpYTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGMxZWJlOTg0YTc4NGMyYmJiNmM2NzZjMGRkMDBlN2Uuc2V0Q29udGVudChodG1sXzE2ZmEwNTdjMGUyZjQ0ZTA4Y2UyZmY3NGY4NGY5MTQ1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzhiOTMxM2E1ZWM3MDRhNTg4MGJhNjlmMGM1YTYwNzJjLmJpbmRQb3B1cChwb3B1cF9kYzFlYmU5ODRhNzg0YzJiYmI2YzY3NmMwZGQwMGU3ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85YzJhOWQyNGY4ZTI0MzRhOGUzNjdiYmI2YjEzZDRjYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTIwMDc0MTE3NzIwNjMsLTQzLjIwMjA1MzI5Mzk2N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNTQ0NTFiNDVjYWU0ZWRiOWJjNDEwNDkwOTg5MTE4NyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mOTEyYTZmNjBlYTc0ZmI3YjEzZGZjOTU5YmFkYTA2YiA9ICQoJzxkaXYgaWQ9Imh0bWxfZjkxMmE2ZjYwZWE3NGZiN2IxM2RmYzk1OWJhZGEwNmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJ1ZmZldDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjU0NDUxYjQ1Y2FlNGVkYjliYzQxMDQ5MDk4OTExODcuc2V0Q29udGVudChodG1sX2Y5MTJhNmY2MGVhNzRmYjdiMTNkZmM5NTliYWRhMDZiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzljMmE5ZDI0ZjhlMjQzNGE4ZTM2N2JiYjZiMTNkNGNiLmJpbmRQb3B1cChwb3B1cF9iNTQ0NTFiNDVjYWU0ZWRiOWJjNDEwNDkwOTg5MTE4Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMTUxNDljMjBjYWE0OGExODcwNzdjYjFkMTJmNmU0YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MTIwOTQ4MjIyMDM5NTgsLTQzLjIxMzQ1NDEzMzM1NDI1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRlMjc4MTY3MmFlMzQ2NDM5NGI1MjkwZGMwY2U5MDlhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U2YTE0MWY3YTFiNTRjZDc4YWY0OTU0YWQzYmQ2MzhmID0gJCgnPGRpdiBpZD0iaHRtbF9lNmExNDFmN2ExYjU0Y2Q3OGFmNDk1NGFkM2JkNjM4ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRlMjc4MTY3MmFlMzQ2NDM5NGI1MjkwZGMwY2U5MDlhLnNldENvbnRlbnQoaHRtbF9lNmExNDFmN2ExYjU0Y2Q3OGFmNDk1NGFkM2JkNjM4Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hMTUxNDljMjBjYWE0OGExODcwNzdjYjFkMTJmNmU0Yi5iaW5kUG9wdXAocG9wdXBfNGUyNzgxNjcyYWUzNDY0Mzk0YjUyOTBkYzBjZTkwOWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDEwYTJhNGM5YWJlNGU3OTlkODY2MDg3MzI5YjU3NWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTA5ODg3ODg0OTk4NjE4LC00My4yMDExNTU3NDYwOTQ0N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wMDNkOTAyYTMyM2Y0ODUwYTc5MjUyNDNlNDJjNzBkOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNDU3YzFjN2IxMjI0NmJmOWI2YmE1M2M2MWZkOGY5MyA9ICQoJzxkaXYgaWQ9Imh0bWxfZTQ1N2MxYzdiMTIyNDZiZjliNmJhNTNjNjFmZDhmOTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wMDNkOTAyYTMyM2Y0ODUwYTc5MjUyNDNlNDJjNzBkOS5zZXRDb250ZW50KGh0bWxfZTQ1N2MxYzdiMTIyNDZiZjliNmJhNTNjNjFmZDhmOTMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDEwYTJhNGM5YWJlNGU3OTlkODY2MDg3MzI5YjU3NWUuYmluZFBvcHVwKHBvcHVwXzAwM2Q5MDJhMzIzZjQ4NTBhNzkyNTI0M2U0MmM3MGQ5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M4ZTJiMmYxOTM2YzQxNjhhMDcxNTJmZTY3N2IzNjFiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxMjUwMiwtNDMuMjA5MzJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogImJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNiwKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDcxZTExNWYwNTViNDQ4MGFjZGE5MWRjOGY5MTk1ZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmMwN2Q4MmM5MDQ2NDA1MDg1Mzg5Y2RjOGJiMjAyNWEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDVmMTM2YTdhM2IwNGJhOThjMWI5Yzg4NjdmYmZhMzAgPSAkKCc8ZGl2IGlkPSJodG1sX2Q1ZjEzNmE3YTNiMDRiYTk4YzFiOWM4ODY3ZmJmYTMwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yYzA3ZDgyYzkwNDY0MDUwODUzODljZGM4YmIyMDI1YS5zZXRDb250ZW50KGh0bWxfZDVmMTM2YTdhM2IwNGJhOThjMWI5Yzg4NjdmYmZhMzApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzhlMmIyZjE5MzZjNDE2OGEwNzE1MmZlNjc3YjM2MWIuYmluZFBvcHVwKHBvcHVwXzJjMDdkODJjOTA0NjQwNTA4NTM4OWNkYzhiYjIwMjVhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2MyNWI4MTRlOGJjYzRhZWNhYzQ3NDQ4MGQwODc4Y2NkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTIyLjkxMzg2MTAyMzQyMjk2LC00My4yMDgzMzE4MDI5NDg4MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYzdiZDgyMTA2M2M0NDAwYWI2MzZlNDk0OTJlZGY3MCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83YjY4YmZiZTg5ZDI0OTIwODBiODQwMTkzNTlkZGNlNyA9ICQoJzxkaXYgaWQ9Imh0bWxfN2I2OGJmYmU4OWQyNDkyMDgwYjg0MDE5MzU5ZGRjZTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmM3YmQ4MjEwNjNjNDQwMGFiNjM2ZTQ5NDkyZWRmNzAuc2V0Q29udGVudChodG1sXzdiNjhiZmJlODlkMjQ5MjA4MGI4NDAxOTM1OWRkY2U3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2MyNWI4MTRlOGJjYzRhZWNhYzQ3NDQ4MGQwODc4Y2NkLmJpbmRQb3B1cChwb3B1cF9mYzdiZDgyMTA2M2M0NDAwYWI2MzZlNDk0OTJlZGY3MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wOTNmNDUxYjJmY2E0NTNkYWEwYTY5NTMxOGU2MDc5ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MjQ3MzE3MTM4NzczMzUsLTQzLjIwOTMwNzIyMzc1OTY4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0ZGFhZDA3ZDE5NDQ4MmE4MDI0YTAyMGEwNmMyMTM2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q0M2MyZDA1MWJiODRjYmVhZDNkYTM0MDE4ODFmMGUxID0gJCgnPGRpdiBpZD0iaHRtbF9kNDNjMmQwNTFiYjg0Y2JlYWQzZGEzNDAxODgxZjBlMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzg0ZGFhZDA3ZDE5NDQ4MmE4MDI0YTAyMGEwNmMyMTM2LnNldENvbnRlbnQoaHRtbF9kNDNjMmQwNTFiYjg0Y2JlYWQzZGEzNDAxODgxZjBlMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wOTNmNDUxYjJmY2E0NTNkYWEwYTY5NTMxOGU2MDc5Zi5iaW5kUG9wdXAocG9wdXBfODRkYWFkMDdkMTk0NDgyYTgwMjRhMDIwYTA2YzIxMzYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODViZWVhY2JmYWQ1NDg0YWI5MGNiMjg3NTQ0OGEyOTIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTIyMTc2ODQ1MzUzMDksLTQzLjI0MDA3MTI2Njg3MTQ3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQ2ZDg1NDUzYTNlODQ4YjBhZmMzMjJhNmUxODBmZjZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q3NTQ5M2ZkZTYxYjQxNGY4YjU5ODY1ZGM5Yjc1ZTE2ID0gJCgnPGRpdiBpZD0iaHRtbF9kNzU0OTNmZGU2MWI0MTRmOGI1OTg2NWRjOWI3NWUxNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDZkODU0NTNhM2U4NDhiMGFmYzMyMmE2ZTE4MGZmNmQuc2V0Q29udGVudChodG1sX2Q3NTQ5M2ZkZTYxYjQxNGY4YjU5ODY1ZGM5Yjc1ZTE2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzg1YmVlYWNiZmFkNTQ4NGFiOTBjYjI4NzU0NDhhMjkyLmJpbmRQb3B1cChwb3B1cF80NmQ4NTQ1M2EzZTg0OGIwYWZjMzIyYTZlMTgwZmY2ZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kYWY0NjhmODMyYmY0NDc5YTU3OWFmODc2NGI3ZWIwMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWy0yMi45MDUxNjI0NzQ2NjgwOSwtNDMuMTc4MDcxOTM2MjQzNDg0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJibHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjYsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2Q3MWUxMTVmMDU1YjQ0ODBhY2RhOTFkYzhmOTE5NWQ4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZmZDkyYjk2ZjJmYjRlNzQ5NzVkMmZiZWVhNmFjYzdhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc1ZGRkZDlkZDU4YTRjNTBiOWEyMTQ2NDYxNDgwMjFjID0gJCgnPGRpdiBpZD0iaHRtbF83NWRkZGQ5ZGQ1OGE0YzUwYjlhMjE0NjQ2MTQ4MDIxYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJhemlsaWFuIFJlc3RhdXJhbnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZmZDkyYjk2ZjJmYjRlNzQ5NzVkMmZiZWVhNmFjYzdhLnNldENvbnRlbnQoaHRtbF83NWRkZGQ5ZGQ1OGE0YzUwYjlhMjE0NjQ2MTQ4MDIxYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kYWY0NjhmODMyYmY0NDc5YTU3OWFmODc2NGI3ZWIwMy5iaW5kUG9wdXAocG9wdXBfNmZkOTJiOTZmMmZiNGU3NDk3NWQyZmJlZWE2YWNjN2EpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTdkNjUzNDEzYWMyNDYzMmIxODIxYmYzZTZlNmY1MWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFstMjIuOTE0OTk3OTU0MDcyODI0LC00My4xODgyNjAzNjA2NTI4M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiYmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC42LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kNzFlMTE1ZjA1NWI0NDgwYWNkYTkxZGM4ZjkxOTVkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85OWRmZjg5Yjc2MzM0MDZjOWQ4ZTY4ZTI3MTRlNDVlZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iOGE2Y2Y3ODYwMjM0YjQ0OGIxODZkZWViYTM0YTM0NSA9ICQoJzxkaXYgaWQ9Imh0bWxfYjhhNmNmNzg2MDIzNGI0NDhiMTg2ZGVlYmEzNGEzNDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyYXppbGlhbiBSZXN0YXVyYW50PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85OWRmZjg5Yjc2MzM0MDZjOWQ4ZTY4ZTI3MTRlNDVlZi5zZXRDb250ZW50KGh0bWxfYjhhNmNmNzg2MDIzNGI0NDhiMTg2ZGVlYmEzNGEzNDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTdkNjUzNDEzYWMyNDYzMmIxODIxYmYzZTZlNmY1MWUuYmluZFBvcHVwKHBvcHVwXzk5ZGZmODliNzYzMzQwNmM5ZDhlNjhlMjcxNGU0NWVmKTsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4=\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f79d88f6f50>"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "venues_map = folium.Map(location=[latitude, longitude], zoom_start=13) # generate map centred around the Conrad Hotel\n",
    "\n",
    "# add a red circle marker to represent the Conrad Hotel\n",
    "folium.features.CircleMarker(\n",
    "    [latitude, longitude],\n",
    "    radius=10,\n",
    "    color='red',\n",
    "    popup='Conrad Hotel',\n",
    "    fill = True,\n",
    "    fill_color = 'red',\n",
    "    fill_opacity = 0.6\n",
    ").add_to(venues_map)\n",
    "\n",
    "# add the Italian restaurants as blue circle markers\n",
    "for lat, lng, label in zip(dataframe_filtered.lat, dataframe_filtered.lng, dataframe_filtered.categories):\n",
    "    folium.features.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        color='blue',\n",
    "        popup=label,\n",
    "        fill = True,\n",
    "        fill_color='blue',\n",
    "        fill_opacity=0.6\n",
    "    ).add_to(venues_map)\n",
    "\n",
    "# display map\n",
    "venues_map"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
